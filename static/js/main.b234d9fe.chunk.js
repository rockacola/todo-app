(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{61:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(14),i=n.n(c),a=n(34),s=n(3),d=n(19),u=n(32),l=n.n(u),m=n(9),p=n(10),g=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"getLists",value:function(){var e=localStorage.getItem("todo-app:lists");return e?JSON.parse(e):[]}},{key:"setLists",value:function(e){var t=JSON.stringify(e);localStorage.setItem("todo-app:lists",t)}}]),e}(),f={lists:g.getLists()},b=Object(d.b)({name:"todo",initialState:f,reducers:{addNewList:function(e,t){var n=t.payload.todoListId,o=t.payload.todoListTitle;e.lists.push({id:n,title:o,items:[]}),g.setLists(e.lists)},addItemToExistingList:function(e,t){var n=t.payload.todoListId,o=t.payload.todoItem,r=e.lists.find((function(e){return e.id===n}));r&&(r.items.push(o),g.setLists(e.lists))},editItem:function(e,t){var n=t.payload.todoListId,o=t.payload.todoItem,r=e.lists.find((function(e){return e.id===n}));if(r){var c=r.items.find((function(e){return e.id===o.id}));c&&(c.title=o.title,c.isComplete=o.isComplete,g.setLists(e.lists))}},deleteItem:function(e,t){var n=t.payload.todoListId,o=t.payload.todoItemId,r=e.lists.find((function(e){return e.id===n}));if(r){var c=r.items.filter((function(e){return e.id!==o}));r.items=c,g.setLists(e.lists)}}}}),j=b.actions,h=(j.addNewList,j.addItemToExistingList,j.deleteItem,j.editItem,b.reducer),x=Object(d.a)({reducer:{todo:h},middleware:function(e){return e().concat(l.a)}}),v=n(35),O=n(1);var y=function(){return console.log("process.env:",Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"0.2.0",REACT_APP_STORAGE_LOG_ENABLED:"true",REACT_APP_STORAGE_CLAIM_DIR:"myTodos",REACT_APP_STORAGE_TODO_ITEMS_BASE_DIR:"todo-items/"})),Object(O.jsx)(s.a,{to:"/todos/1"})};var w=function(){return Object(O.jsx)("div",{className:"h-screen bg-gray-100",children:Object(O.jsx)("div",{className:"py-8",children:Object(O.jsxs)("div",{className:"w-100 max-w-sm mx-auto bg-white rounded p-4 text-center",children:[Object(O.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"Not Found"}),Object(O.jsx)("p",{children:"Check your URL and try again."})]})})})},T=n(4),S=n.n(T),I=n(11),N=n(20),C=n(12),A=n(17),_=n(13),L=n(33),k=n.n(L),E=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"create",value:function(e){var t=Object(A.padStart)(Math.floor(1e6*Math.random()).toString(),6,"0");return{id:"i_".concat(t),listId:"l_1",title:e,completedAt:-1,createdAt:Math.floor(Date.now()/1e3),updatedAt:-1}}}]),e}(),R=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"toBool",value:function(e){return!!e&&"true"===e.toLowerCase()}}]),e}(),D=function(){function e(){Object(m.a)(this,e)}return Object(p.a)(e,null,[{key:"sleep",value:function(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))}}]),e}(),P="todo-items/",M={name:"myTodos",builder:function(e){return e.declareType("todoItem",{type:"object",properties:{id:{type:"string"},listId:{type:"string"},title:{type:"string"},completedAt:{type:"number"},createdAt:{type:"number"},updatedAt:{type:"number"}},required:["id","listId","title","createdAt"]}),{exports:{init:function(){e.cache(P)},on:e.on,addTodoItem:function(){var t=Object(I.a)(S.a.mark((function t(n){var o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=P+n.id,t.abrupt("return",e.storeObject("todoItem",o,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),updateTodoItem:function(){var t=Object(I.a)(S.a.mark((function t(n){var o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=P+n.id,t.abrupt("return",e.storeObject("todoItem",o,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),removeTodoItem:function(){var t=Object(I.a)(S.a.mark((function t(n){var o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=P+n,t.abrupt("return",e.remove(o));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),listTodoItems:function(){var t=Object(I.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.getAll(P));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}}};function B(e){var t=e.onSubmit,n=e.title,o=e.onTitleChange;return Object(O.jsx)("form",{onSubmit:t,children:Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("input",{className:"p-4 bg-gray-50 focus:bg-gray-100 flex-grow rounded-tl rounded-bl",type:"text",name:"title",value:n,onChange:o,placeholder:"New item..."}),Object(O.jsx)("button",{className:"px-5 py-4 bg-green-400 bg-opacity-70 transition hover:bg-opacity-100 rounded-tr rounded-br",type:"submit",children:Object(O.jsx)(C.c,{className:"w-6 h-6"})})]})})}function F(e){var t=e.isConnected,n=e.onConnect,o=e.onDisconnect,r=t?"Disconnect from RemoteStorage":"Connect to a RemoteStorage",c=t?"bg-red-500":"";return Object(O.jsx)("div",{className:"absolute top-6 right-6",children:Object(O.jsx)("div",{className:"p-2 bg-gray-200 rounded-full transition hover:bg-opacity-80 cursor-pointer text-gray-50 ".concat(c),onClick:function(e){t?o():n()},title:r,children:Object(O.jsx)(C.d,{className:"w-6 h-6"})})})}var H,G="myTodos";var J=function(){var e=Object(o.useState)(""),t=Object(N.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)([]),i=Object(N.a)(c,2),a=i[0],s=i[1],d=Object(o.useState)(!1),u=Object(N.a)(d,2),l=u[0],m=u[1];Object(o.useEffect)((function(){console.log("Component onMount triggered."),console.log("initRemoteStorage triggered."),(H=new k.a({logging:R.toBool("true"),modules:[M]})).access.claim(G,"rw"),H.on("ready",(function(){console.log("remoteStorage.ready event triggered.")})),H.on("connected",(function(){console.log("remoteStorage.connected event triggered."),p(),m(!0),_.b.info("RemoteStorage connected!")})),H.on("network-offline",(function(){console.log("remoteStorage.network-offline event triggered.")})),H.on("network-online",(function(){console.log("remoteStorage.network-online event triggered.")})),H.on("disconnected",(function(){console.log("remoteStorage.disconnected event triggered."),m(!1),_.b.info("RemoteStorage disconnected!")})),H.on("error",(function(e){console.log("remoteStorage.error event triggered. err:",e)})),H.onChange("/".concat(G,"/"),(function(){console.log("remoteStorage.onChange event triggered.")}))}),[]);var p=function(){var e=Object(I.a)(S.a.mark((function e(){var t,n,o,r,c=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=c.length>0&&void 0!==c[0]?c[0]:0)>0)){e.next=4;break}return e.next=4,D.sleep(t);case 4:return e.next=6,H.myTodos.listTodoItems();case 6:n=e.sent,o=Object.values(n).filter((function(e){return"object"===typeof e})),r=Object(A.sortBy)(o,(function(e){return e.createdAt})),s(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(I.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.myTodos.addTodoItem(t);case 2:return e.next=4,p();case 4:r(""),_.b.success("New todo item added.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(I.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.myTodos.removeTodoItem(t.id);case 2:return e.next=4,p();case 4:_.b.success("Todo item deleted.");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){var n=e.completedAt>-1,o=n?"line-through":"";return Object(O.jsxs)("div",{className:"p-2 my-2 bg-green-50 transition hover:bg-green-100 rounded flex items-stretch",children:[Object(O.jsx)("div",{className:"w-12 h-12 bg-green-300 bg-opacity-70 rounded-lg transition hover:bg-opacity-100 cursor-pointer text-green-800 flex items-center justify-center",onClick:function(){return function(e){console.log("onIsCompleteToggleHandler triggered. item:",e);var t=Object(A.clone)(e);t.completedAt=e.completedAt>-1?-1:Math.floor(Date.now()/1e3),t.updatedAt=Math.floor(Date.now()/1e3),H.myTodos.updateTodoItem(t),p()}(e)},children:n&&Object(O.jsx)(C.a,{className:"w-8 h-8"})}),Object(O.jsx)("div",{className:"flex-grow ml-4 flex items-center text-gray-800 ".concat(o),children:e.title}),Object(O.jsx)("div",{className:"px-4 py-2 bg-red-500 bg-opacity-70 rounded transition hover:bg-opacity-100 cursor-pointer flex items-center",onClick:function(){return function(e){console.log("onItemDeleteHandler triggered. item:",e),f(e)}(e)},children:Object(O.jsx)(C.e,{className:"w-4 h-4 text-gray-50"})})]},t)};return Object(O.jsx)("div",{className:"min-h-screen bg-gray-100",children:Object(O.jsxs)("div",{className:"w-100 max-w-xl h-full mx-auto bg-white py-4 md:px-4 relative",children:[Object(O.jsx)("h1",{className:"text-lg font-bold text-gray-800 text-center leading-tight p-4 mb-4",children:"Todo List"}),Object(O.jsx)("div",{className:"",children:a.map((function(e,t){return b(e,t)}))}),Object(O.jsx)("div",{children:Object(O.jsx)(B,{title:n,onSubmit:function(e){e.preventDefault(),console.log("onSubmitHandler triggered. e:",e);var t=E.create(n);g(t)},onTitleChange:function(e){r(e.target.value)}})}),Object(O.jsx)(F,{isConnected:l,onConnect:function(){console.log("connectHandler triggered.");var e=prompt("What is your account (eg name@example.com)?");e&&(console.log("connecting to ".concat(e," ...")),H.connect(e))},onDisconnect:function(){H.disconnect()}}),Object(O.jsx)("div",{className:"my-8",children:Object(O.jsx)(C.b,{className:"w-16 h-16 text-gray-100 m-auto"})}),Object(O.jsxs)("div",{className:"text-sm text-gray-200 text-center",children:["Todo App ","0.2.0"]})]})})};var W=function(){return Object(O.jsx)(v.a,{store:x,children:Object(O.jsxs)(a.a,{basename:"/todo-app",children:[Object(O.jsxs)(s.d,{children:[Object(O.jsx)(s.b,{path:"/todos/1",exact:!0,children:Object(O.jsx)(J,{})}),Object(O.jsx)(s.b,{path:"/",exact:!0,children:Object(O.jsx)(y,{})}),Object(O.jsx)(s.b,{children:Object(O.jsx)(w,{})})]}),Object(O.jsx)(_.a,{position:"bottom-right"})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),o(e),r(e),c(e),i(e)}))};n(61),n(62);i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root")),K()}},[[63,1,2]]]);
//# sourceMappingURL=main.b234d9fe.chunk.js.map